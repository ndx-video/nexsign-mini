<div class="h-full flex flex-col gap-4">
  <div>
    <span class="text-base font-semibold text-desert-fg">Advanced Settings </span>
    <span class="text-sm text-desert-tan">Backup, restore, and diagnostic tools.</span>
  </div>

  <div class="grid md:grid-cols-3 gap-4">
    <!-- Backup & Restore -->
    <div class="bg-desert-darkgray rounded shadow-lg p-4 border border-desert-gray">
      <h3 class="font-medium mb-3 text-desert-yellow">Backup & Restore <a href="#backup-history" class="text-xs text-desert-cyan hover:text-desert-cyan/80">(history)</a></h3>
      <div class="space-y-3">
        <div>
          <button class="w-full text-left px-3 py-2 bg-desert-gray hover:bg-desert-gray/80 rounded text-desert-cyan" data-on-click="@post('/api/hosts/export/internal');loadBackupHistory()">
            ğŸ’¾ Save Internal
          </button>
          <p class="text-xs text-desert-gray mt-1 ml-1">Save current host list to server storage</p>
        </div>
        <div>
          <button class="w-full text-left px-3 py-2 bg-desert-gray hover:bg-desert-gray/80 rounded text-desert-cyan" onclick="downloadHostList()">
            â¬‡ï¸ Save Download
          </button>
          <p class="text-xs text-desert-gray mt-1 ml-1">Download host list as JSON file</p>
        </div>
        <div class="border-t border-desert-gray pt-3">
          <button class="w-full text-left px-3 py-2 bg-desert-gray hover:bg-desert-gray/80 rounded text-desert-orange" data-on-click="@post('/api/hosts/import/internal')">
            ğŸ“‚ Use Internal Host List
          </button>
          <p class="text-xs text-desert-gray mt-1 ml-1">Restore from server storage</p>
        </div>
        <div>
          <label class="w-full block px-3 py-2 bg-desert-gray hover:bg-desert-gray/80 rounded text-desert-orange cursor-pointer">
            â¬†ï¸ Upload Host List
            <input type="file" id="upload-host-list" accept=".json" class="hidden" onchange="uploadHostList(this)">
          </label>
          <p class="text-xs text-desert-gray mt-1 ml-1">Upload and restore from JSON file</p>
        </div>
      </div>
    </div>

    <!-- Live diagnostics card -->
    <div class="bg-desert-darkgray rounded shadow-lg p-4 border border-desert-gray">
      <h3 class="font-medium mb-2 text-desert-yellow">Live Node Stats</h3>
      <div id="diag-stats" class="text-sm space-y-1">
        <div><span class="text-desert-tan">Time:</span> <span id="diag-time" class="text-desert-cyan">â€”</span></div>
        <div><span class="text-desert-tan">Node ID:</span> <span id="diag-nodeid" class="font-mono text-desert-cyan text-xs">â€”</span></div>
        <div><span class="text-desert-tan">Hosts in state:</span> <span id="diag-hosts" class="text-desert-cyan">â€”</span></div>
        <div><span class="text-desert-tan">Most recent internal backup:</span> <span id="diag-backup" class="text-desert-cyan text-xs">â€”</span></div>
        <div><span class="text-desert-tan">WS status:</span> <span id="diag-ws" class="text-desert-yellow">connectingâ€¦</span></div>
      </div>
    </div>

    <!-- Console Logs -->
    <div class="bg-desert-darkgray rounded shadow-lg p-4 border border-desert-gray">
      <h3 class="font-medium mb-2 text-desert-yellow">Console Logs</h3>
      <div id="console-logs" class="text-xs font-mono space-y-0.5 max-h-96 overflow-y-auto bg-black/30 p-3 rounded border border-desert-gray">
        <div class="text-desert-gray italic">Waiting for log messages...</div>
      </div>
    </div>

    <!-- Backup History -->
    <div id="backup-history" class="bg-desert-darkgray rounded shadow-lg p-4 border border-desert-gray md:col-span-3">
      <h3 class="font-medium mb-2 text-desert-yellow">Backup History</h3>
      <div id="backup-list" class="text-xs font-mono space-y-0.5 max-h-96 overflow-y-auto bg-black/30 p-3 rounded border border-desert-gray">
        <div class="text-desert-gray italic">Loading backup history...</div>
      </div>
    </div>
  </div>
</div>
